<div layout="column" layout-fill>
    <div flex="20" layout="row" class="dish-hero">
        <img ng-src="{{dishDetail.dish.imageUrl}}" flex alt="{{dishDetail.dish.name}}" class="responsive-img">
        <div layout="row" class="bottom-actions-container">
            <md-fab-speed-dial md-direction="right" ng-class="md-scale">
                <md-fab-trigger>
                    <md-button aria-label="share" title="Share this dish" class="md-fab md-warn">
                        <md-icon md-svg-icon="share"></md-icon>
                    </md-button>
                </md-fab-trigger>
                <md-fab-actions>
                    <md-button aria-label="facebook" ng-click="dishDetail.fbShare(dishDetail.dish)" class="md-fab md-primary md-mini">
                        <md-icon md-svg-icon="facebook"></md-icon>
                    </md-button>
                    <md-button aria-label="twitter" class="md-fab md-primary md-mini">
                        <md-icon md-svg-icon="twitter"></md-icon>
                    </md-button>
                    <md-button aria-label="Pinterest" class="md-fab md-primary md-mini">
                        <md-icon md-svg-icon="pinterest"></md-icon>
                    </md-button>
                </md-fab-actions>
            </md-fab-speed-dial>
            <md-button flex="60" ng-click="dishDetail.enterFlipBook($event)"><span class="md-title">Read Cooking Book</span></md-button>
            <div flex></div>
        </div>
        <md-icon ng-show="dishDetail.dish.isCollected" md-svg-icon="favorite" class="md-primary big-icon favorite-icon" title="My Favorite"></md-icon>
    </div>
    <div flex="80" layout="row" layout-padding layout-align="center">
        <div flex="80" layout="column" layout-fill>
            <h3 class="md-headline">{{dishDetail.dish.name}}</h3>
            <md-content class="blog">
                <p>{{dishDetail.dish.blog}}</p>
            </md-content>
            <div layout="row" layout-margin ng-repeat="photo in dishDetail.dish.photos">
                <img flex ng-src="{{photo}}" alt="" class="responsive-img">
            </div>
            <div layout="row" layout-align="center" layout-margin>
                <md-whiteframe flex="50" class="md-whiteframe-z2 italic-list" layout="column" layout-algin="center center">
                    <label class="md-title">Ingredients</label>
                    <ul flex>
                        <li ng-repeat="item in dishDetail.dish.ingredients">{{item}}</li>
                    </ul>
                </md-whiteframe>
            </div>
            <div layout="row" layout-margin>
                <md-whiteframe class="md-whiteframe-z3 md-body-1" flex layout="column">
                    <label class="md-title">Instructions</label class="md-title">
                    <md-list>
                        <md-list-item ng-repeat="instruction in dishDetail.dish.instructions" ng-click="dishDetail.showInstructionPhoto(instruction.photo, $event)">
                            <md-icon ng-if="instruction.photo" md-svg-icon="photo" class="md-primary"></md-icon>
                            <p><strong class="italic-list step">Step {{$index + 1}}</strong>{{instruction.text}}</p>
                        </md-list-item>
                    </md-list>
                </md-whiteframe>
            </div>
            <h3 ng-if="dishDetail.dish.comments.length>0">Comments</h3>
            <md-list>
                <md-list-item class="md-2-line" ng-repeat="comment in dishDetail.dish.comments | orderBy: '-createdDate'">
                    <img ng-click="dishDetail.reply(comment.author, $event)" ng-src="{{comment.author.photoUrl}}" alt="{{comment.author.userName}}" title="@{{comment.author.userName}}" class="md-avatar">
                    <div class="md-list-item-text">
                        <h3><strong ng-if="comment.replyTo">@{{comment.replyTo.userName}}: </strong>{{comment.content}}</h3>
                        <p>{{comment.createdDate | date: 'short'}}</p>
                    </div>
                </md-list-item>
            </md-list>
        </div>
        <div flex="20" layout="column" layout-align="start center" layout-fill class="right-col">
            <h3 class="md-headline">Related</h3>
            <a class="related-item" ng-repeat="item in dishDetail.relatedDishes" ng-href="/dishes/{{item._id}}">
                <img ng-src="{{item.imageUrl}}" alt="{{item.name}}" title="{{item.name}}" />
            </a>
        </div>
    </div>
</div>
<div class="speed-menu" layout="row" layout-align="center center">
    <md-fab-speed-dial md-direction="up" ng-class="md-fling">
        <md-fab-trigger>
            <md-button aria-label="menu" class="md-fab md-warn">
                <md-icon md-svg-icon="menu"></md-icon>
            </md-button>
        </md-fab-trigger>
        <md-fab-actions>
            <md-button aria-label="comment" title="Leave a comment" ng-click="dishDetail.newComment($event)" class="md-fab md-raised md-primary md-mini">
                <md-icon md-svg-icon="comments"></md-icon>
            </md-button>
            <md-button aria-label="favorite" title="Save as favorite" ng-click="dishDetail.collect($event)" class="md-fab md-raised md-primary md-mini">
                <md-icon md-svg-icon="favorite"></md-icon>
            </md-button>
        </md-fab-actions>
    </md-fab-speed-dial>
</div>
